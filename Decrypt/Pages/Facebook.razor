@page "/facebook"
@using Decrypt.Model.Shared.Interfaces
@using Decrypt.Services

@inject DialogService _dialogService
@inject DataService _dataService

<PageTitle>Facebook Data</PageTitle>
<h1>Your Facebook Data</h1>

<div class="row">
	@if (_dataService.FbRoot?.AvailableData.Values != null)
	{
		foreach (var wrapper in _dataService.FbRoot?.AvailableData.Values!)
		{
			if (wrapper is ISingleItemListFile file)
			{
				_singleItemListFile = file;
				<div class=@ColStr>
					@NumberCardWithSingleItemListTableDialogInstance
				</div>
			}
		}
	}
</div>

@code {
	const int ColNumber = 3;
	string ColStr => $"col-{12/ColNumber}";

	ISingleItemListFile _singleItemListFile = null!;

	RenderFragment NumberCardWithSingleItemListTableDialogInstance => builder =>
	{
		var type = typeof(NumberCardWithSingleItemListTableDialog<>).MakeGenericType(_singleItemListFile.ItemsType);
		builder.OpenComponent(1, type);
		builder.AddAttribute(2, nameof(NumberCardWithSingleItemListTableDialog<dynamic>.SingleItemListFile), _singleItemListFile);
		builder.CloseComponent();
	};
}
