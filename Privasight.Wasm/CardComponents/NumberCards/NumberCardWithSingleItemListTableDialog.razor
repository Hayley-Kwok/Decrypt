@inject DialogService _dialogService

@using Privasight.Model.Shared.Interfaces
@using Privasight.Wasm.CardComponents.Tables
@using Privasight.Wasm.CardComponents.NumberCards.Base

@typeparam TItem where TItem : Privasight.Model.Shared.AbstractClasses.DbTableObj

<PlainNumberCard Title="@SingleItemListFile.Title"
                           Number="SingleItemListFile.Items?.Count() ?? 0"
                           OnClickFunc="ShowTableDialog"/>

@code {

    [Parameter]
	public ISingleItemListFile<TItem> SingleItemListFile { get; set; } = null!;

	private async Task ShowTableDialog()
	{
		await _dialogService.OpenAsync<SingleItemListTable<TItem>>(SingleItemListFile.Title,
			new Dictionary<string, object>
			{ { nameof(SingleItemListTable<TItem>.Items), 
				SingleItemListFile.Items ?? Array.Empty<TItem>() },
				{ nameof(SingleItemListTable<TItem>.Description), SingleItemListFile.Description }
			},
			new DialogOptions { Width = "90%", Height = "90%", Resizable = true });
	}
}
